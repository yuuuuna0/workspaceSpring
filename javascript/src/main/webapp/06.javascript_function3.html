<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
    /*
    1. function객체를 변수에대입(일급함수)
    2. function객체를 파라메타데이타로사용
    3. function객체를 반환
    
    	- 자바스크립트 내부함수
    	- 클로져(closure)
    		클로져는 내부함수가 참조하는 외부함수의 지역변수가
    		외부함수에의해 내부함수가 반환된이후에도 환경(life-cycle)이
    		유지되는것을 의미한다.
     */

	function outer_function1(){
    	let outer1_var="outer1 var value";
		/***********inner function************/
		function inner_function1(){
			let inner1_var="inner1 var value";
			document.write("inner_function1 --> outer_var: "+outer1_var+"<br>");
			document.write("inner_function1 --> inner1_var: "+inner1_var+"<br>");
		}
		document.write("-------- outer_function1에서 inner_function1 호출 시작 ----------<br>");
		inner_function1();
		document.write("-------- outer_function1에서 inner_function1 호출 끝 ----------<br>");
		
		document.write("outer_function1 --> outer_var1: "+outer1_var+"<br>");
		document.write("outer_function1 --> inner_var1: (존재안함)<br>");
		return inner_function1;		//inner_function1은 사라지지 않고 반환된다.
	}
    function outer_function2(){
    	let outer2_var="outer2 var value";
    	return function(){
    		let inner2_var="inner2 var value";
    		document.write("익명 inner_function2 --> outer2_var: "+outer2_var+"<br>");
    		document.write("익명 inner_function2 --> inner2_var: "+inner2_var+"<br>");
    	}
    }
    function outer_function4(a,b){
    	let c=a+b;
    	return function(){
    		document.write("익명 inner_function4() --> a: "+a+"<br>");
    		document.write("익명 inner_function4() --> b: "+b+"<br>");
    		document.write("익명 inner_function4() --> c: "+c+"<br>");
    	}
    }

    
</script>

</head>
<body>
	<h1>javascript inner function,closure(클로져)</h1>
	<hr />
	<script type="text/javascript">
		document.write('######################outer_function1()호출 시작##################<br>');
		let returnInnerFunction1=outer_function1();
		document.write('######################outer_function1()호출  끝##################<br>');
	/***************************************************************************************************/	
		document.write('######################반환받은 inner_function1()호출 시작##################<br>');
		returnInnerFunction1();
		document.write('######################반환받은 inner_function1()호출   끝##################<br>');
		
		document.write('######################반환받은 inner_function2()호출 시작##################<br>');
		let returnInnerFunction2=outer_function2();
		returnInnerFunction2();
		document.write('######################반환받은 inner_function2()호출   끝##################<br>');
		
		document.write('######################반환받은 inner_function3()호출 시작##################<br>');
		document.write('######################반환받은 inner_function3()호출   끝##################<br>');
		
		document.write('######################반환받은 inner_function4()호출  시작##################<br>');
		outer_function4(100,200)();		//반환값이 function이니까 그 반환되는 function을 실행하기 위해()를 한번 더 붙여줌
		let returnInnerFunction4=outer_function4(3,4);
		returnInnerFunction4();
		document.write('######################반환받은 inner_function4()호출    끝##################<br>');
    </script>
</body>
</html>










